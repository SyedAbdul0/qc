name: Assign Labels Based on Conventional Commits

on:
  pull_request:
    types: [opened, edited, closed]

jobs:
  assign-labels:
    runs-on: ubuntu-latest
    if: ${{ github.event.pull_request.merged == false || github.event.pull_request.merged == null }}

    steps:
      - name: Checkout Code
        uses: actions/checkout@v3

      - name: Assign Labels
        uses: mauroalderete/action-assign-labels@v1
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          conventional-commits: |
            - type: 'fix'
              nouns: ['fix', 'bugfix', 'bug']
              labels: ['ğŸ› Bug Fixes']
            - type: 'feat'
              nouns: ['feature', 'enhancement']
              labels: ['ğŸš€ Features']
            - type: 'chore'
              nouns: ['chore']
              labels: ['ğŸ§° Maintenance']
          apply-changes: true
          pull-request-number: ${{ github.event.pull_request.number }}
          maintain-labels-not-matched: false

      # Step 3: Debugging information (optional)
      - name: Debug information
        run: |
          echo "Current branch: $GITHUB_REF"
          git status
